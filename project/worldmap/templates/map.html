<!DOCTYPE html>
<html lang="en">
<head>
  <title>Weather Map</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <!-- jQuery and Bootstrap  -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
  <!-- CSS styles here -->
</head>
<body>
<style>
  header {
    background-color: #a7a9a8;
    padding: 30px;
    text-align: center;
    font-size: 35px;
    color: white;
}

body {font-family: Arial, Helvetica, sans-serif;}

.navbar {
    width: 100%;
    background-color: #333;
    overflow: auto;
}

.nav-links {
    list-style-type: none;
    padding: 0;
}

.nav-links li {
    display: inline;
    margin-right: 10px;
}

.nav-links a {
    text-decoration: none;
    color: black;
    font-weight: bold;
}

.nav-links a.active,
.nav-links a:hover {
    color: #0275d8;
}

.tab-content {
    display: none;
    padding: 10px;
    border: 1px solid #ddd;
    margin-top: 5px;
}

.tab-content.active {
    display: block;
}

.page-container {
    display: flex;
    padding: 20px;
    flex-direction: row;
}

.control-panel {
    width: 300px; /* Control the width of the control panel */
    margin-left: 20px; /* Space between map and control panel */
    overflow-y: auto; /* Scroll if content is too long */
    padding: 10px; /* Padding around the content */
}

.control-panel .form-group {
    margin-bottom: 10px;
}

.control-panel label {
    display: block; /* Ensure the label is on a new line */
    margin-bottom: 0.5rem;
}

.control-panel input[type="text"],
.control-panel select,
.control-panel .btn {
    width: 100%; /* Make sure each form element fills its container */
}

.control-panel .checkbox-group {
    margin-bottom: 0.5rem;
}

.map-container {
    flex-grow: 1; /* Allow the map to grow and fill the space */
    padding: 0; /* Remove padding */
    margin-top: 10px; /* Top margin */
    margin-right: 20px; /* Right margin, match the left margin of control panel */
    height: 100%; /* Height based on the width of the viewport */
    max-height: 800px; /* You can set a max height if you want */
    overflow: hidden; /* Hide overflow */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); /* Optional shadow */
    border: 2px solid #ddd; /* Optional border */
}




</style>

<header class="header">
  <h2>Weather Map</h2>
</header> 

<div class="page-container">
    <div class="map-container">
      
      {{ map_html|safe }}
  
    </div>
      
  <!-- side panel -->
  <div class="side-panel">
      <nav>
        <ul class="nav-links">
          <li><a href="#data-display" class="active">Data Display</a></li>
          <li><a href="#visualization">Visualization</a></li>

        </ul>
      </nav>

      <div id="data-display" class="tab-content active">
        <div class="data-display-section mb-3 p-3 border rounded">
          <h4>Data Display</h4>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="temperatureCheck">
            <label class="form-check-label" for="temperatureCheck">Temperature</label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="cloudCheck">
            <label class="form-check-label" for="cloudCheck">Cloud Coverage</label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="precipitationCheck">
            <label class="form-check-label" for="precipitationCheck">Precipitation</label>
        </div>
      

      <!-- Date Range Inputs -->
      
        <div class="form-group">
          <br>
          <h4>Time Period</h4>
          <label for="fromDate">From:</label>
          <input type="text" class="form-control" id="fromDate" placeholder="dd/mm/yyyy">
        </div>
        <div class="form-group">
          <label for="toDate">To:</label>
          <input type="text" class="form-control" id="toDate" placeholder="dd/mm/yyyy">
          <br>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
      
        <div class="form-group">
            <!-- geo inpiut -->
          <h4><label for="locationDropdown">Geographic Location</label></h4>
          <div class="dropdown-menu" aria-labelledby="locationDropdown"></div>
              <form method="post" action="{% url 'map_request' %}" class="px-4 py-3">
                  {% csrf_token %}
                  {{ form.as_p }} 

                  <div class="form-group">
                      <label for="latitude">Latitude:</label>
                      <input type="text" class="form-control" id="latitude" name="latitude" value="{{ request.POST.latitude }}">
                      <select name="lat_direction" class="form-control mt-2">
                          <option value="N">North</option>
                          <option value="S">South</option>
                      </select>
                  
                  <div class="form-group">
                      <label for="longitude">Longitude:</label>
                      <input type="text" class="form-control" id="longitude" name="longitude" value="{{ request.POST.longitude }}">
                      <select name="long_direction" class="form-control mt-2">
                          <option value="E">East</option>
                          <option value="W">West</option>
                      </select>
                  </div>
                  <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
      </div>

  <!-- Data Visualization Section -->
    <br>
  <div id="visualization" class="tab-content"> 
      <!-- Visualization content here -->

    <div class="data-visualization-section mb-3 p-3 border rounded">
      <h4>Data Visualization</h4>
      <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" id="lineChartCheck">
          <label class="form-check-label" for="lineChartCheck">Line Chart</label>
      </div>
      <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" id="columnChartCheck">
          <label class="form-check-label" for="columnChartCheck">Column Chart</label>
      </div>
      <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" id="comboChartCheck">
          <label class="form-check-label" for="comboChartCheck">Combo Chart</label>
      </div>
    </div>
  </div>


  <div class="Datadowload-section mb-3 p-3 border rounded">
    <h4>Data/Chart Download</h4>
    <button type="submit" class="btn btn-primary">Download</button>
  </div>
</div>
<!-- jQuery å’Œ Bootstrap JS -->

<!-- Include jQuery and Bootstrap JS for the modal -->

<!-- Include jQuery and Bootstrap JS once, remove any other duplicate script tags -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

<script>
  
// Your JavaScript for tab functionality
document.addEventListener('DOMContentLoaded', function () {
  var navLinks = document.querySelectorAll('.nav-links a');
  var tabContents = document.querySelectorAll('.tab-content');

  navLinks.forEach(function (link) {
    link.addEventListener('click', function (e) {
      e.preventDefault();
      var activeTabAttribute = e.target.getAttribute('href');

      // Deactivate all tabs and hide all tab contents
      navLinks.forEach(function (link) {
        link.classList.remove('active');
      });
      tabContents.forEach(function (content) {
        content.classList.remove('active');
      });

      // Activate the clicked tab and show content
      document.querySelector(activeTabAttribute).classList.add('active');
      e.target.classList.add('active');
    });
  });
});
</script>

</body>
</html>